# Оформление Pull Rrequest-ов

## Введение
Данная статья не носит в себе цели научить вас создавать ПРы, объяснить, что это такое с нуля, показать какие кнопки нажимать, чтобы ПР появился и так далее. Всё это уже много раз и много где расписано. Поэтому поищите в гугле, на нашей вики или ещё где, здесь про это не будет сказано ни слова. Цель данной статьи - рассказать про некоторые нюансы о которых нигде нет ни слова. Преимущественно здесь будут подняты вопросы **оформления**.

## Что такое ПР?
В двух словах: вы сделали работу, вы представляете её на обозрение в виде запроса. Ключевое слово "представляете". Вы можете накодить убер сложную и интересную фичу. Это круто. Но если вы не расскажете в ПРе как эта фича работает, то скорее всего его не смержат. Нулевое описание обязывает ревьюера читать ваш код тщательней. Если код очень сложный, то просто на то, чтобы понять контекст придётся потратить не малое время. Это плохо, потому что мейнтейнерам за их время никто не платит и всё происходит на добровольных началах. Войдите в чужое положение и потратьте дополнительные 15 минут на оформление реквеста. Вы покажете себя с очень хорошей стороны, да и в принципе это ведь в ваших интересах, чтобы ПР быстрее смержился.

## TL;DR
Попытавшись создать ПР вы увидите следующий шаблон, самое главное - следуйте ему:
 - Описание изменений
   - Опишите изменения данного ПР-а.
     Если есть связные ишью (issues), или другие ПРы - укажите их тут, для автоматического закрытия ишью следует использовать 
     ключевые слова https://help.github.com/en/articles/closing-issues-using-keywords Если есть связное форумное обсуждение на тему 
     изменений - укажите ссылку на эту тему.
 - Почему и что этот ПР улучшит
   - Опишите причину для изменений. Этот пункт особенно важен для описания изменений баланса, новых механик.
 - Авторство
   - **Опциональный пункт!**
     Если авторство не полностью ваше, вы делаете порт с другого билда - обязательно укажите первоисточник изменений! Для крупных 
     комплексных изменений достаточно будет указать билд(ы)-первоисточник, в остальных случаях можете указать исходный ПР.

Пулл Реквест, как правило, состоит из трёх основных элементов: название, описание, чейнджлог. Далее о каждом элементе в деталях.

## Название
Важная часть. Хорошее название даёт хотя бы минимальное понимание изменений, которые вносит ПР. Каких-то строгих правил у нас нету, вы можете давать любое название своему ПРу, которое посчитаете нужным, хоть на русском, хоть на английском.

#### Важно
- Не давайте слишком длинных названий. Слишком длинное - это название, которое не вмещается в выделенное гитхабом место и разбивается на части, частично залезая в основное тело описания ПРа.
- Название так или иначе **обязано** передавать суть ПРа. Даже если в контексте каких-то обсуждений в конференциях название кажется вам самодостаточным, всё равно нет. Что-то из формата "ы, сматрите чё сделал" или "Спасибо ~~~'у за победу" - недопустимо.
- После написания названия прочтите его и попробуйте определить, что происходит в ПРе с позиции другого человек.
- Используйте дополнительные теги `[WiP]` и `[DNM]`. Первое это Work In Progress, означает, что ПР не готов и вы создали его, например, для предварительного обсуждения изменений. Второе это Do Not Merge. Этот тег пригодится, например, если ПР ваш закончен, но в нём вы сделали нечто экстремальное и мир ещё к этому не готов. Кроме того, бот, подключённый к нашему репозиторию, увидев эти теги автоматически поставит вашему ПРу соответствующие лэйблы. Оба тега можно использовать в одном названии.
- Не используйте ключевые слова, распознаваемые гитхабом. Подробнее о них [тут](https://help.github.com/articles/closing-issues-using-keywords/).

## Описание
Очень важная часть. В ней вы должны максимально, на сколько вы можете, расписать всё что вы сделали. При этом у разных реквестов есть разные специфики. Например, если вы делаете какой-то ремап или респрайт чего-то, то обязательно прикрепляйте скриншоты как было и как стало. Если скриншотов много, то имеет смысл спрятать их под спойлер. При ремапинге, кстати, не брезгуйте упоминанием всего, а желательно вообще всего. Чем больше вы опишете, тем меньше вопросов "Как это тут оказалось?!" к вам возникнет.

#### Как создать спойлер
Нетривиальным путём. В разметке гитхаба нету нативной возможности создавать спойлеры, поэтому нужно использовать эту конструкцию:
```
<details> 
  <summary>Заголовок спойлера</summary>
  Текст под спойлером.
</details>
```
Disclaimer: внутри конструкции гитхаб не рендерит свою разметку, поэтому нужно использовать html теги.

#### Важно
- Именно в описании нужно использовать ключевые слова гитхаба типа `fixes`, `closes` и так далее. Весь список представлен по ссылке [тут](https://help.github.com/articles/closing-issues-using-keywords/).
- Не забывайте про форматирование. Пробелы, переходы на новые строки, абзацы и всё такое прочее.

## Авторство
Если ваша работа или её часть не оригинальны, стоит отдать дань уважения автору в описании PR-а. Иногда это обязательно в соответствии с лицензией.

Если спрайты/звуки вам создал другой человек - укажите (стоит в т.ч. и в чеинжлоге, про это в следующей части).

Если вы портируете PR или изменения с другого билда - укажите этот билд. Еще лучше - если вы найдете и укажите конкретный PR.

Если вы используете сторонние звуковые файлы с саунд-библиотек - укажите ссылку на файл в этой библиотеке. Это важно как для автора, так и нам, чтобы проверить совместимость лицензии.

Вопрос лицензирования сложный для освещения в этом гайде, и чаще всего не требуется для изучения, но, если быть кратким:
- Все звуки должны быть под Creative Commons 3.0 BY-SA (сокращенно CC 3.0 BY-SA), или под совместимой свободной лицензией.
- Нельзя портировать с билда Goonstation, они имеют не совместимую с остальными билдами лицензию. Исключение - если вы договоритесь с автором напрямую о релицензировании его части. Остальные мейнстрим билды (tg, paradise), как правило, с совместимой с нами лицензией, и таковой проблемы не имеют.


## Важно
Как уже была сказано, к репозиторию подключён бот. Одна из фич которые он может делать - это автоматически добавлять лэйблы к ПРу. Данная функция облегчает работу мэйнтейнерам, убирая довольно рутинную работу. Список лэйблов, которые будут повешены на ПР формируется исходя из чейнджлога. Например, `rscadd` - это лэйбл `Feature`, `bugfix` - `Fix` и так далее. Но при этом есть важный момент, автолэйблинг происходит **лишь в момент создания** ПРа. Поэтому, большая рекомендация и просьба, создавать ПР и писать к нему описание с чейнджлогом разом, а не частями. Особенно, если это описание вы добавляете сразу после создания ПРа.
